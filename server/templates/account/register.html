{% extends "page.html" %}
{% block wrapper %}
<div class="row">
	<div class="small-10 small-centered large-6 large-centered columns">
		<h2>Register</h2>

		<form method="post" action="{{ request.path }}">
			<input type="hidden" name="next" value="{{ next }}"/>

			<div class="row">
				<div class="small-12 columns panel radius">
					<label for="email">Email</label>
					<input type="email" id="email" name="email" placeholder="Email"/>
					<input type="email" id="email2" name="email2" placeholder="Re-type email"/>

					<label for="password">Password</label>
					<input type="password" id="password" name="password" placeholder="Password"/>
					<input type="password" id="password2" name="password2" placeholder="Re-type password"/>

					<button type="submit" class="button secondary radius">Register</button>
				</div>
			</div>
		</form>

	</div>
</div>
{% endblock %}

{% block behavior %}
<script>
jQuery(document).ready(function($) {
	var email_message = null;

	$('input#email,input#email2').change(function(event) {
		if (email_message != null) {
			$(email_message).remove();
			email_message = null;
		}

		var input = $('input#email');
		var input2 = $('input#email2');

		var email = input.val();
		var email2 = input2.val();

		if (email == email2 && email != '') {
			input.removeClass('error');
			input2.removeClass('error');
		}
		else if (email == '' || email2 == '') {
			input.removeClass('error');
			input2.removeClass('error');
		}
		else {
			input.addClass('error');
			input2.addClass('error');
			email_message = $('<small class="error">Emails do not match</small>');
		}

		if (email_message != null) {
			input2.after(email_message);
		}
	});

	var password_message = null;

	$('input#password,input#password2').change(function(event) {
		if (password_message != null) {
			$(password_message).remove();
			password_message = null;
		}

		var input = $('input#password');
		var input2 = $('input#password2');

		var password = input.val();
		var password2 = input2.val();

		if (password == password2 && password != '') {
			input.removeClass('error');
			input2.removeClass('error');
		}
		else if (password == '' || password2 == '') {
			input.removeClass('error');
			input2.removeClass('error');
		}
		else {
			input.addClass('error');
			input2.addClass('error');
			password_message = $('<small class="error">Passwords do not match</small>');
		}

		if (password_message != null) {
			input2.after(password_message);
		}
	});

	$('input#email').focus();
});
</script>
{% endblock %}
